"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[546],{8690:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>l,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var t=a(4848),i=a(8453);const r={sidebar_position:1},s="IChainPayReceiver.sol",c={id:"SOL-SDK/IChainPayReceiver",title:"IChainPayReceiver.sol",description:"The",source:"@site/docs/SOL-SDK/IChainPayReceiver.md",sourceDirName:"SOL-SDK",slug:"/SOL-SDK/IChainPayReceiver",permalink:"/ChainPay/docs/SOL-SDK/IChainPayReceiver",draft:!1,unlisted:!1,editUrl:"https://github.com/Hattorius/ChainPay/tree/main/docs/docs/SOL-SDK/IChainPayReceiver.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"ideaSidebar",previous:{title:"IChainPay.sol",permalink:"/ChainPay/docs/SOL-SDK/IChainPay.sol"}},o={},d=[{value:"<code>paid()</code>",id:"paid",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Example Implementation",id:"example-implementation",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"ichainpayreceiversol",children:"IChainPayReceiver.sol"})}),"\n",(0,t.jsxs)(n.p,{children:["The\n",(0,t.jsx)(n.a,{href:"https://github.com/Hattorius/ChainPay/blob/main/contracts/interfaces/IChainPayReceiver.sol",children:(0,t.jsx)(n.code,{children:"IChainPayReceiver"})}),"\ninterface enables your smart contract to receive payments from the ChainPay\ncontract."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-solidity",children:"interface IChainPayReceiver {\n    function paid(address from, bytes memory data) external;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"paid",children:(0,t.jsx)(n.code,{children:"paid()"})}),"\n",(0,t.jsx)(n.p,{children:"The paid function is called by the ChainPay smart contract once a payment has\nbeen successfully processed."}),"\n",(0,t.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"from"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"address"})}),(0,t.jsx)(n.td,{children:"The address of the sender who made the payment"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"data"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bytes"})}),(0,t.jsxs)(n.td,{children:["The data passed along when creating the ChainPay transaction. This is why the ",(0,t.jsx)(n.code,{children:"data_raw"})," option exists in the ",(0,t.jsx)(n.a,{href:"./../JS-SDK/api/types#createtransactioninput",children:(0,t.jsx)(n.code,{children:"CreateTransactionInput"})}),", which accepts a ",(0,t.jsx)(n.code,{children:"Uint8Array"}),". This allows for extra parameters or data to be included for your callback."]})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"example-implementation",children:"Example Implementation"}),"\n",(0,t.jsx)(n.p,{children:"Below is an example of an ERC20 token contract that allows users to mint tokens\nthrough a ChainPay payment."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-solidity",children:'// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\nimport "@openzeppelin/contracts/token/ERC20/ERC20.sol";\nimport "./IChainPayReceiver.sol";\nimport "./IChainPay.sol";\n\ncontract MyToken is ERC20, IChainPayReceiver {\n    address private immutable chainPay;\n\n    constructor(string memory name, string memory symbol, address _chainPay) ERC20(name, symbol) {\n        // Register the contract with ChainPay and set the signer\n        IChainPay(_chainPay).contractToggle();\n        IChainPay(_chainPay).setSigner(msg.sender);\n\n        chainPay = _chainPay;\n    }\n\n    function paid(address from, bytes memory data) public override {\n        require(msg.sender == chainPay, "Unauthorized sender");\n        _mint(from, 10 ** decimals()); // Mint 10 tokens to the payer\n    }\n}\n'})})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>c});var t=a(6540);const i={},r=t.createContext(i);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);