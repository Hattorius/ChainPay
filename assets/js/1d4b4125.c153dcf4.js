"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[340],{6703:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>l,frontMatter:()=>r,metadata:()=>d,toc:()=>o});var i=t(4848),s=t(8453);const r={sidebar_position:1},a="IChainPay.sol",d={id:"SOL-SDK/IChainPay.sol",title:"IChainPay.sol",description:"The",source:"@site/docs/SOL-SDK/IChainPay.sol.md",sourceDirName:"SOL-SDK",slug:"/SOL-SDK/IChainPay.sol",permalink:"/ChainPay/docs/SOL-SDK/IChainPay.sol",draft:!1,unlisted:!1,editUrl:"https://github.com/Hattorius/ChainPay/tree/main/docs/docs/SOL-SDK/IChainPay.sol.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"ideaSidebar",previous:{title:"Solidity SDK",permalink:"/ChainPay/docs/category/solidity-sdk"},next:{title:"IChainPayReceiver.sol",permalink:"/ChainPay/docs/SOL-SDK/IChainPayReceiver"}},c={},o=[{value:"Paying in BNB, invoice in BNB",id:"paying-in-bnb-invoice-in-bnb",level:2},{value:"Paying in Token, invoice in same Token",id:"paying-in-token-invoice-in-same-token",level:2},{value:"Invoice in Token/BNB, paying in another Token",id:"invoice-in-tokenbnb-paying-in-another-token",level:2},{value:"Paying in BNB, Invoice in Token",id:"paying-in-bnb-invoice-in-token",level:2},{value:"<code>contractToggle()</code>",id:"contracttoggle",level:2},{value:"<code>setSigner(address)</code>",id:"setsigneraddress",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"ichainpaysol",children:"IChainPay.sol"})}),"\n",(0,i.jsxs)(n.p,{children:["The\n",(0,i.jsx)(n.a,{href:"https://github.com/Hattorius/ChainPay/blob/main/contracts/interfaces/IChainPay.sol",children:(0,i.jsx)(n.code,{children:"IChainPay"})}),"\nSolidity interface facilitates interactions with the ChainPay smart contract.\nThis interface defines functions for automating on-chain payments via the\nChainPay contract."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"interface IChainPay {\n    function pay(address recipient, bytes memory signature, bytes memory data) external payable;\n    function pay(address recipient, address token, uint256 amount, bytes memory signature, bytes memory data) external;\n    function pay(address recipient, address expectedToken, uint256 expectedTokenAmount, address payingToken, uint256 payingTokenAmount, uint24 fee, bytes memory signature, bytes memory data) external;\n    function pay(address recipient, address token, uint256 amount, uint24 fee, bytes memory signature, bytes memory data) external payable;\n    function setSigner(address signer) external;\n    function contractToggle() external;\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"paying-in-bnb-invoice-in-bnb",children:"Paying in BNB, invoice in BNB"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"function pay(address recipient, bytes memory signature, bytes memory data) external payable;\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"recipient"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"address"})}),(0,i.jsx)(n.td,{children:"The recipient of the payment"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"signature"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bytes"})}),(0,i.jsxs)(n.td,{children:["A signature validating the transaction. ",(0,i.jsx)(n.a,{href:"./../JS-SDK/example#creating-a-transaction",children:"See examples of how to generate it"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"data"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bytes"})}),(0,i.jsxs)(n.td,{children:["Additional data for a possible callback or transaction context. See ",(0,i.jsx)(n.a,{href:"./../JS-SDK/api/createTransaction",children:(0,i.jsx)(n.code,{children:"chainpay.createTransaction"})})," or ",(0,i.jsx)(n.a,{href:"./../JS-SDK/api/createTransactionRaw",children:(0,i.jsx)(n.code,{children:"chainpay.createTransactionRaw"})})]})]})]})]}),"\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.code,{children:"msg.value"})}),(0,i.jsx)(n.th,{children:"The amount of BNB being paid."})]})})}),"\n",(0,i.jsx)(n.h2,{id:"paying-in-token-invoice-in-same-token",children:"Paying in Token, invoice in same Token"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"function pay(address recipient, address token, uint256 amount, bytes memory signature, bytes memory data) external;\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"recipient"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"address"})}),(0,i.jsx)(n.td,{children:"The recipient of the payment"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"token"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"address"})}),(0,i.jsx)(n.td,{children:"The token to be used for payment, and the one expected in the transaction"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"amount"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"uint256"})}),(0,i.jsx)(n.td,{children:"The amount of the specified token to be paid"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"signature"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bytes"})}),(0,i.jsxs)(n.td,{children:["A signature validating the transaction. ",(0,i.jsx)(n.a,{href:"./../JS-SDK/example#creating-a-transaction",children:"See examples of how to generate it"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"data"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bytes"})}),(0,i.jsxs)(n.td,{children:["Additional data for a possible callback or transaction context. See ",(0,i.jsx)(n.a,{href:"./../JS-SDK/api/createTransaction",children:(0,i.jsx)(n.code,{children:"chainpay.createTransaction"})})," or ",(0,i.jsx)(n.a,{href:"./../JS-SDK/api/createTransactionRaw",children:(0,i.jsx)(n.code,{children:"chainpay.createTransactionRaw"})})]})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"invoice-in-tokenbnb-paying-in-another-token",children:"Invoice in Token/BNB, paying in another Token"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"function pay(address recipient, address expectedToken, uint256 expectedTokenAmount, address payingToken, uint256 payingTokenAmount, uint24 fee, bytes memory signature, bytes memory data) external;\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"recipient"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"address"})}),(0,i.jsx)(n.td,{children:"The recipient of the payment"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"expectedToken"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"address"})}),(0,i.jsx)(n.td,{children:"The token expected by the transaction"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"expectedTokenAmount"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"uint256"})}),(0,i.jsx)(n.td,{children:"The amount of the expected token"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"payingToken"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"address"})}),(0,i.jsx)(n.td,{children:"The token being used for the actual payment"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"payingTokenAmount"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"uint256"})}),(0,i.jsxs)(n.td,{children:["The amount of the paying token being used. ",(0,i.jsx)(n.strong,{children:"(Slippage to be added)"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"fee"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"uint24"})}),(0,i.jsxs)(n.td,{children:["Pool fee obtained from ",(0,i.jsx)(n.a,{href:"./../JS-SDK/api/utils/findPool",children:(0,i.jsx)(n.code,{children:"chainpay.utils.findPool"})})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"signature"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bytes"})}),(0,i.jsxs)(n.td,{children:["A signature validating the transaction. ",(0,i.jsx)(n.a,{href:"./../JS-SDK/example#creating-a-transaction",children:"See examples of how to generate it"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"data"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bytes"})}),(0,i.jsxs)(n.td,{children:["Additional data for a possible callback or transaction context. See ",(0,i.jsx)(n.a,{href:"./../JS-SDK/api/createTransaction",children:(0,i.jsx)(n.code,{children:"chainpay.createTransaction"})})," or ",(0,i.jsx)(n.a,{href:"./../JS-SDK/api/createTransactionRaw",children:(0,i.jsx)(n.code,{children:"chainpay.createTransactionRaw"})})]})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"paying-in-bnb-invoice-in-token",children:"Paying in BNB, Invoice in Token"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"function pay(address recipient, address token, uint256 amount, uint24 fee, bytes memory signature, bytes memory data) external payable;\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"recipient"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"address"})}),(0,i.jsx)(n.td,{children:"The recipient of the payment"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"token"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"address"})}),(0,i.jsx)(n.td,{children:"The token the transaction expects"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"amount"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"uint256"})}),(0,i.jsx)(n.td,{children:"The amount of the expected token"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"fee"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"uint24"})}),(0,i.jsxs)(n.td,{children:["Pool fee obtained from ",(0,i.jsx)(n.a,{href:"./../JS-SDK/api/utils/findPool",children:(0,i.jsx)(n.code,{children:"chainpay.utils.findPool"})})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"signature"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bytes"})}),(0,i.jsxs)(n.td,{children:["A signature validating the transaction. ",(0,i.jsx)(n.a,{href:"./../JS-SDK/example#creating-a-transaction",children:"See examples of how to generate it"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"data"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bytes"})}),(0,i.jsxs)(n.td,{children:["Additional data for a possible callback or transaction context. See ",(0,i.jsx)(n.a,{href:"./../JS-SDK/api/createTransaction",children:(0,i.jsx)(n.code,{children:"chainpay.createTransaction"})})," or ",(0,i.jsx)(n.a,{href:"./../JS-SDK/api/createTransactionRaw",children:(0,i.jsx)(n.code,{children:"chainpay.createTransactionRaw"})})]})]})]})]}),"\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.code,{children:"msg.value"})}),(0,i.jsx)(n.th,{children:"The amount of BNB being paid."})]})})}),"\n",(0,i.jsx)(n.h2,{id:"contracttoggle",children:(0,i.jsx)(n.code,{children:"contractToggle()"})}),"\n",(0,i.jsxs)(n.p,{children:["This function toggles whether ",(0,i.jsx)(n.code,{children:"msg.sender"})," is a contract. When set to ",(0,i.jsx)(n.code,{children:"true"}),",\nthe ChainPay smart contract will trigger a callback to your contract that\nimplements the ",(0,i.jsx)(n.a,{href:"./IChainPayReceiver",children:(0,i.jsx)(n.code,{children:"IChainPayReceiver"})})," interface after\nsuccessfully sending the tokens."]}),"\n",(0,i.jsx)(n.h2,{id:"setsigneraddress",children:(0,i.jsx)(n.code,{children:"setSigner(address)"})}),"\n",(0,i.jsxs)(n.p,{children:["This function should only be called by smart contracts with ",(0,i.jsx)(n.code,{children:"contractToggle()"}),"\nset to ",(0,i.jsx)(n.code,{children:"true"}),". Since smart contracts cannot sign transactions directly, this\nfunction allows you to designate a signer that can sign on behalf of the smart\ncontract. This enables smart contracts to receive payments through ChainPay by\nhaving the designated signer authorize transactions."]})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>d});var i=t(6540);const s={},r=i.createContext(s);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);